function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

import { compose } from 'redux';
import { withRouter } from 'react-router';
import { lifecycle, pure, mapProps } from 'recompose';
import { identity, defaults } from 'lodash';
var logger = console;
var log = {
  error: {
    routeEnter: function routeEnter(_routeEnter) {
      logger.warn("The onRouteEnter has to be a function. You have supplied: ".concat(_typeof(_routeEnter)));
    },
    routeLeave: function routeLeave(_routeLeave) {
      logger.warn("The onRouteLeave has to be a function. You have supplied: ".concat(_typeof(_routeLeave)));
    },
    reRoute: function reRoute(_reRoute) {
      logger.warn("The shouldReRoute has to be a function. You have supplied: ".concat(_typeof(_reRoute)));
    }
  }
};

var enterHandler = function enterHandler(props) {
  if (typeof props.read === 'function') {
    props.read();
  }
};

var leaveHandler = function leaveHandler(props) {
  if (typeof props.clear === 'function') {
    props.clear();
  }
};

var reRouteHandler = function reRouteHandler(oldProps, newProps) {
  return oldProps.location.pathname !== newProps.location.pathname || oldProps.location.search !== newProps.location.search || oldProps.location.hash !== newProps.location.hash;
};

var routeDependencies = function routeDependencies(config) {
  var defaultConfig = {
    onRouteEnter: enterHandler,
    onRouteLeave: leaveHandler,
    shouldReRoute: reRouteHandler,
    propsMapping: identity
  };

  var _defaults = defaults(config, defaultConfig),
      onRouteEnter = _defaults.onRouteEnter,
      onRouteLeave = _defaults.onRouteLeave,
      shouldReRoute = _defaults.shouldReRoute,
      propsMapping = _defaults.propsMapping;

  return compose(withRouter,
  /* tslint:disable no-invalid-this */
  lifecycle({
    componentDidMount: function componentDidMount() {
      if (typeof onRouteEnter !== 'function') {
        log.error.routeEnter(onRouteEnter);
      } else {
        onRouteEnter(this.props);
      }
    },
    componentDidUpdate: function componentDidUpdate(prevProps) {
      if (typeof shouldReRoute !== 'function') {
        log.error.reRoute(shouldReRoute);
      } else if (typeof onRouteEnter !== 'function') {
        log.error.routeEnter(onRouteEnter);
      } else if (typeof onRouteLeave !== 'function') {
        log.error.routeLeave(onRouteLeave);
      } else if (shouldReRoute(prevProps, this.props)) {
        onRouteLeave(this.props);
        onRouteEnter(this.props);
      }
    },
    componentWillUnmount: function componentWillUnmount() {
      if (typeof onRouteLeave !== 'function') {
        log.error.routeLeave(onRouteLeave);
      } else {
        onRouteLeave(this.props);
      }
    }
  }),
  /* tslint:enable no-invalid-this */
  pure, mapProps(propsMapping));
};

export default routeDependencies;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9IT0Mvcm91dGVEZXBlbmRlbmNpZXMudHMiXSwibmFtZXMiOlsiY29tcG9zZSIsIndpdGhSb3V0ZXIiLCJsaWZlY3ljbGUiLCJwdXJlIiwibWFwUHJvcHMiLCJpZGVudGl0eSIsImRlZmF1bHRzIiwibG9nZ2VyIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwicm91dGVFbnRlciIsIndhcm4iLCJyb3V0ZUxlYXZlIiwicmVSb3V0ZSIsImVudGVySGFuZGxlciIsInByb3BzIiwicmVhZCIsImxlYXZlSGFuZGxlciIsImNsZWFyIiwicmVSb3V0ZUhhbmRsZXIiLCJvbGRQcm9wcyIsIm5ld1Byb3BzIiwibG9jYXRpb24iLCJwYXRobmFtZSIsInNlYXJjaCIsImhhc2giLCJyb3V0ZURlcGVuZGVuY2llcyIsImNvbmZpZyIsImRlZmF1bHRDb25maWciLCJvblJvdXRlRW50ZXIiLCJvblJvdXRlTGVhdmUiLCJzaG91bGRSZVJvdXRlIiwicHJvcHNNYXBwaW5nIiwiY29tcG9uZW50RGlkTW91bnQiLCJjb21wb25lbnREaWRVcGRhdGUiLCJwcmV2UHJvcHMiLCJjb21wb25lbnRXaWxsVW5tb3VudCJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxTQUFTQSxPQUFULFFBQXdCLE9BQXhCO0FBQ0EsU0FBU0MsVUFBVCxRQUFnRCxjQUFoRDtBQUNBLFNBQVNDLFNBQVQsRUFBb0JDLElBQXBCLEVBQTBCQyxRQUExQixRQUEwQyxXQUExQztBQUNBLFNBQVNDLFFBQVQsRUFBbUJDLFFBQW5CLFFBQW1DLFFBQW5DO0FBRUEsSUFBTUMsTUFBTSxHQUFHQyxPQUFmO0FBRUEsSUFBTUMsR0FBRyxHQUFHO0FBQ1JDLEVBQUFBLEtBQUssRUFBRTtBQUNIQyxJQUFBQSxVQURHLHNCQUNRQSxXQURSLEVBQ3lCO0FBQ3hCSixNQUFBQSxNQUFNLENBQUNLLElBQVAsNkVBQWdGRCxXQUFoRjtBQUNILEtBSEU7QUFJSEUsSUFBQUEsVUFKRyxzQkFJUUEsV0FKUixFQUl5QjtBQUN4Qk4s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QVo7QUFDQWMsUUFBQUEsWUFBWSxDQUFDLEtBQUtkLEtBQU4sQ0FBWjtBQUNIO0FBQ0osS0FuQmtEO0FBb0JuRHFCLElBQUFBLG9CQXBCbUQsa0NBb0I1QjtBQUNuQixVQUFJLE9BQU9OLFlBQVAsS0FBd0IsVUFBNUIsRUFBd0M7QUFDcEN0QixRQUFBQSxHQUFHLENBQUNDLEtBQUosQ0FBVUcsVUFBVixDQUFxQmtCLFlBQXJCO0FBQ0gsT0FGRCxNQUVPO0FBQ0hBLFFBQUFBLFlBQVksQ0FBQyxLQUFLZixLQUFOLENBQVo7QUFDSDtBQUNKO0FBMUJrRCxHQUE5QyxDQUhDO0FBK0JWO0FBQ0FiLEVBQUFBLElBaENVLEVBaUNWQyxRQUFRLENBQUM2QixZQUFELENBakNFLENBQWQ7QUFtQ0gsQ0EzQ0Q7O0FBNENBLGVBQWVOLGlCQUFmIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29tcG9zZSB9IGZyb20gJ3JlZHV4JztcbmltcG9ydCB7IHdpdGhSb3V0ZXIsIFJvdXRlQ29tcG9uZW50UHJvcHMgfSBmcm9tICdyZWFjdC1yb3V0ZXInO1xuaW1wb3J0IHsgbGlmZWN5Y2xlLCBwdXJlLCBtYXBQcm9wcyB9IGZyb20gJ3JlY29tcG9zZSc7XG5pbXBvcnQgeyBpZGVudGl0eSwgZGVmYXVsdHMgfSBmcm9tICdsb2Rhc2gnO1xuXG5jb25zdCBsb2dnZXIgPSBjb25zb2xlO1xuXG5jb25zdCBsb2cgPSB7XG4gICAgZXJyb3I6IHtcbiAgICAgICAgcm91dGVFbnRlcihyb3V0ZUVudGVyOiBhbnkpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGBUaGUgb25Sb3V0ZUVudGVyIGhhcyB0byBiZSBhIGZ1bmN0aW9uLiBZb3UgaGF2ZSBzdXBwbGllZDogJHt0eXBlb2Ygcm91dGVFbnRlcn1gKTtcbiAgICAgICAgfSxcbiAgICAgICAgcm91dGVMZWF2ZShyb3V0ZUxlYXZlOiBhbnkpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGBUaGUgb25Sb3V0ZUxlYXZlIGhhcyB0byBiZSBhIGZ1bmN0aW9uLiBZb3UgaGF2ZSBzdXBwbGllZDogJHt0eXBlb2Ygcm91dGVMZWF2ZX1gKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVSb3V0ZShyZVJvdXRlOiBhbnkpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGBUaGUgc2hvdWxkUmVSb3V0ZSBoYXMgdG8gYmUgYSBmdW5jdGlvbi4gWW91IGhhdmUgc3VwcGxpZWQ6ICR7dHlwZW9mIHJlUm91dGV9YCk7XG4gICAgICAgIH0sXG4gICAgfSxcbn07XG5cbmNvbnN0IGVudGVySGFuZGxlciA9IChwcm9wczogT3B0aW9uYWxQcm9wcykgPT4ge1xuICAgIGlmICh0eXBlb2YgcHJvcHMucmVhZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBwcm9wcy5yZWFkKCk7XG4gICAgfVxufTtcblxuY29uc3QgbGVhdmVIYW5kbGVyID0gKHByb3BzOiBPcHRpb25hbFByb3BzKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBwcm9wcy5jbGVhciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBwcm9wcy5jbGVhcigpO1xuICAgIH1cbn07XG5cbmNvbnN0IHJlUm91dGVIYW5kbGVyID0gKG9sZFByb3BzOiBSb3V0ZUNvbXBvbmVudFByb3BzLCBuZXdQcm9wczogUm91dGVDb21wb25lbnRQcm9wcykgPT5cbiAgICBvbGRQcm9wcy5sb2NhdGlvbi5wYXRobmFtZSAhPT0gbmV3UHJvcHMubG9jYXRpb24ucGF0aG5hbWUgfHxcbiAgICBvbGRQcm9wcy5sb2NhdGlvbi5zZWFyY2ggIT09IG5ld1Byb3BzLmxvY2F0aW9uLnNlYXJjaCB8fFxuICAgIG9sZFByb3BzLmxvY2F0aW9uLmhhc2ggIT09IG5ld1Byb3BzLmxvY2F0aW9uLmhhc2g7XG5cbmludGVyZmFjZSBPcHRpb25hbFByb3BzIHtcbiAgICByZWFkPzogKC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkO1xuICAgIGNsZWFyPzogKC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkO1xufVxuXG5pbnRlcmZhY2UgQ29uZmlnPFAsIFAyPiB7XG4gICAgb25Sb3V0ZUVudGVyOiAocHJvcHM6IFAgJiBPcHRpb25hbFByb3BzKSA9PiB2b2lkO1xuICAgIG9uUm91dGVMZWF2ZTogKHByb3BzOiBQICYgT3B0aW9uYWxQcm9wcykgPT4gdm9pZDtcbiAgICBzaG91bGRSZVJvdXRlOiAocHJldlByb3BzOiBQICYgUm91dGVDb21wb25lbnRQcm9wcywgcHJvcHM6IFAgJiBSb3V0ZUNvbXBvbmVudFByb3BzKSA9PiBib29sZWFuO1xuICAgIHByb3BzTWFwcGluZzogKHByb3BzOiBQICYgT3B0aW9uYWxQcm9wcykgPT4gUDI7XG59XG5cbmNvbnN0IHJvdXRlRGVwZW5kZW5jaWVzID0gPFAsIFAyID0ge1trZXk6IHN0cmluZ106IGFueX0+KGNvbmZpZz86IFBhcnRpYWw8Q29uZmlnPFAsIFAyPj4pID0+IHtcbiAgICBjb25zdCBkZWZhdWx0Q29uZmlnOiBDb25maWc8UCwgUDI+ID0ge1xuICAgICAgICBvblJvdXRlRW50ZXI6IGVudGVySGFuZGxlcixcbiAgICAgICAgb25Sb3V0ZUxlYXZlOiBsZWF2ZUhhbmRsZXIsXG4gICAgICAgIHNob3VsZFJlUm91dGU6IHJlUm91dGVIYW5kbGVyLFxuICAgICAgICBwcm9wc01hcHBpbmc6IGlkZW50aXR5LFxuICAgIH07XG4gICAgY29uc3QgeyBvblJvdXRlRW50ZXIsIG9uUm91dGVMZWF2ZSwgc2hvdWxkUmVSb3V0ZSwgcHJvcHNNYXBwaW5nIH0gPSBkZWZhdWx0cyhjb25maWcsIGRlZmF1bHRDb25maWcpO1xuICAgIHJldHVybiBjb21wb3NlKFxuICAgICAgICB3aXRoUm91dGVyLFxuICAgICAgICAvKiB0c2xpbnQ6ZGlzYWJsZSBuby1pbnZhbGlkLXRoaXMgKi9cbiAgICAgICAgbGlmZWN5Y2xlPFAgJiBPcHRpb25hbFByb3BzICYgUm91dGVDb21wb25lbnRQcm9wcywge30+KHtcbiAgICAgICAgICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb25Sb3V0ZUVudGVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZy5lcnJvci5yb3V0ZUVudGVyKG9uUm91dGVFbnRlcik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb25Sb3V0ZUVudGVyKHRoaXMucHJvcHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBQICYgUm91dGVDb21wb25lbnRQcm9wcykge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc2hvdWxkUmVSb3V0ZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBsb2cuZXJyb3IucmVSb3V0ZShzaG91bGRSZVJvdXRlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBvblJvdXRlRW50ZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nLmVycm9yLnJvdXRlRW50ZXIob25Sb3V0ZUVudGVyKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBvblJvdXRlTGVhdmUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nLmVycm9yLnJvdXRlTGVhdmUob25Sb3V0ZUxlYXZlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNob3VsZFJlUm91dGUocHJldlByb3BzLCB0aGlzLnByb3BzKSkge1xuICAgICAgICAgICAgICAgICAgICBvblJvdXRlTGVhdmUodGhpcy5wcm9wcyk7XG4gICAgICAgICAgICAgICAgICAgIG9uUm91dGVFbnRlcih0aGlzLnByb3BzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvblJvdXRlTGVhdmUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nLmVycm9yLnJvdXRlTGVhdmUob25Sb3V0ZUxlYXZlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvblJvdXRlTGVhdmUodGhpcy5wcm9wcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSksXG4gICAgICAgIC8qIHRzbGludDplbmFibGUgbm8taW52YWxpZC10aGlzICovXG4gICAgICAgIHB1cmUsXG4gICAgICAgIG1hcFByb3BzKHByb3BzTWFwcGluZyksXG4gICAgKTtcbn07XG5leHBvcnQgZGVmYXVsdCByb3V0ZURlcGVuZGVuY2llcztcbiJdfQ==